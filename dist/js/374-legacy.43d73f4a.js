"use strict";(self["webpackChunksupermall"]=self["webpackChunksupermall"]||[]).push([[374],{6314:function(s,e,t){t.r(e),t.d(e,{default:function(){return Ss}});var i=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{attrs:{id:"detail"}},[t("detail-nav-bar",{ref:"NavBar",attrs:{tablist:["商品","参数","评论","推荐"]},on:{scrollToActiveSite:s.scrollToActiveSite}}),t("scroll",{ref:"scroller",attrs:{"probe-type":3,"pull-up-load":!0},on:{bescroll:s.bescroll}},[t("detail-swiper",{attrs:{topimges:s.topimges}}),t("detail-goods-message",{attrs:{"goods-message":s.goodsMessage}}),t("detail-shop-message",{attrs:{"shop-message":s.shopMessage}}),t("detail-goods-info",{attrs:{"goods-info":s.goodsInfo}}),t("detail-goods-size",{ref:"goodsSize",attrs:{"goods-size":s.goodsSize}}),t("detail-user-rate",{ref:"userRate",attrs:{"user-rate":s.userRate}}),t("div",{staticClass:"recommend"},[s._v(" 相关推荐 ")]),t("goods-list",{ref:"recommends",attrs:{goods:s.recommends}})],1),t("ScrollBack",{directives:[{name:"show",rawName:"v-show",value:s.isbackshow,expression:"isbackshow"}],nativeOn:{click:function(e){return s.backToTop.apply(null,arguments)}}}),t("detail-bottom-bar",{on:{addToCart:s.addToCart}})],1)},o=[],a=(t(9653),t(7957)),r=function(){var s=this,e=s.$createElement,i=s._self._c||e;return i("div",{staticClass:"topnav"},[i("top-nav",[i("div",{staticClass:"left",attrs:{slot:"left"},on:{click:s.BackToHome},slot:"left"},[i("img",{attrs:{src:t(228),alt:""}})]),i("div",{staticClass:"center",attrs:{slot:"center"},slot:"center"},s._l(s.tablist,(function(e,t){return i("div",{staticClass:"center-item",class:{active:t===s.activeindex},on:{click:function(e){return s.changeActiveItem(t)}}},[s._v(s._s(e))])})),0)])],1)},n=[],l=t(2168),c={name:"DeTailNavBar",components:{topNav:l.Z},data:function(){return{activeindex:0}},props:{tablist:{type:Array,default:function(){return[]}}},methods:{changeActiveItem:function(s){this.activeindex=s,this.$emit("scrollToActiveSite",s)},BackToHome:function(){this.$router.back()}}},d=c,u=t(1001),g=(0,u.Z)(d,r,n,!1,null,"b352ad16",null),h=g.exports,f=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("swiper",{staticClass:"detailswiper"},s._l(s.topimges,(function(s){return t("swiper-item",[t("img",{attrs:{src:s,alt:""}})])})),1)},p=[],v=t(2225),m={name:"DetailSwiper",components:{Swiper:v.k,SwiperItem:v.t},props:{topimges:{type:Array,default:function(){return[]}}}},_=m,b=(0,u.Z)(_,f,p,!1,null,"71729444",null),S=b.exports,C=function(){var s=this,e=s.$createElement,t=s._self._c||e;return 0!==Object.keys(s.goodsMessage).length?t("div",{staticClass:"goodsMessage"},[t("div",{staticClass:"title"},[s._v(s._s(s.goodsMessage.title))]),t("div",{staticClass:"price"},[t("span",[s._v("￥"+s._s(s.goodsMessage.realPrice))]),t("span",[s._v(s._s(s.goodsMessage.oldPrice))]),s.goodsMessage.discount?t("div",{staticClass:"discount"},[t("span",[s._v(s._s(s.goodsMessage.discount))])]):s._e()]),t("div",{staticClass:"columns"},[t("span",[t("i",{staticClass:"iconfont"},[s._v("")]),s._v(" "+s._s(s.goodsMessage.columns[1])+" ")]),t("span",[t("i",{staticClass:"iconfont"},[s._v("")]),s._v(" "+s._s(s.goodsMessage.columns[2])+" ")]),t("span",[t("img",{attrs:{src:s.goodsMessage.services[s.goodsMessage.services.length-1].icon,alt:""}}),s._v(" "+s._s(s.goodsMessage.services[s.goodsMessage.services.length-1].name)+" ")])]),t("div",{staticClass:"services"},s._l(s.goodsMessage.services.length-1,(function(e){return t("span",[s.goodsMessage.services[e-1].icon?t("img",{attrs:{src:s.goodsMessage.services[e-1].icon,alt:""}}):s._e(),s._v(s._s(s.goodsMessage.services[e-1].name)+" ")])})),0)]):s._e()},y=[],M={name:"DetailGoodsMessage",props:{goodsMessage:{type:Object,default:{}}}},T=M,$=(0,u.Z)(T,C,y,!1,null,"f5ef763c",null),k=$.exports,I=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"shopmessage"},[t("p",[s.shopMessage.fans>1e4?t("i",{staticClass:"iconfont"},[s._v("")]):s._e(),t("span",[s._v(" 店铺信息")])]),t("div",{staticClass:"shoplogo"},[t("img",{attrs:{src:s.shopMessage.logo,alt:""}}),t("span",[s._v(s._s(s.shopMessage.name))]),t("span",[t("span",{staticClass:"iconfont"},[s._v(" ")]),s._v(s._s(s.shopMessage.fans)+"关注")])]),t("div",{staticClass:"shopser"},[t("div",{staticClass:"shop-left"},[t("div",[t("p",[s._v(s._s(s.shopMessage.sells)+"单")]),t("span",[s._v("总销量")])]),t("div",[t("p",[s._v(s._s(s.shopMessage.goodsCount)+"件")]),t("span",[s._v("全部宝贝")])])]),t("div",{staticClass:"shop-right"},s._l(s.shopMessage.score,(function(e){return t("div",[s._v(" "+s._s(e.name)+" "),e.isBetter?t("i",{staticClass:"iconfont better"},[s._v(s._s(e.score)+" ")]):t("i",{staticClass:"iconfont nobetter"},[s._v(s._s(e.score)+" ")])])})),0)]),t("a",{staticClass:"goshop",attrs:{href:"javascript:;"}},[s._v("进店逛逛")])])},w=[],z={name:"DetailShopMessage",props:{shopMessage:{type:Object,default:function(){return{}}}}},x=z,R=(0,u.Z)(x,I,w,!1,null,"7cddcab0",null),D=R.exports,B=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{attrs:{id:"detailgoodsinfo"}},[t("div",{staticClass:"desc"},[t("span",[s._v(s._s(s.goodsInfo.desc))])]),t("div",{staticClass:"key"},[s._v(" "+s._s(s.goodsInfo.key)+" ")]),t("div",{staticClass:"imglist"},s._l(s.goodsInfo.imgList,(function(e){return t("img",{attrs:{src:e,alt:""},on:{load:s.imgLoaded}})})),0)])},E=[],L={name:"DetailShopInfo",data:function(){return{imgcount:0,imgListLength:0}},props:{goodsInfo:{type:Object,default:function(){return{}}}},methods:{imgLoaded:function(){this.$bus.$emit("imghasloaded")}},watch:{goodsInfo:function(){this.imgListLength=this.goodsInfo.imgList.length}}},P=L,j=(0,u.Z)(P,B,E,!1,null,"94abd028",null),A=j.exports,Z=function(){var s=this,e=s.$createElement,t=s._self._c||e;return 0!=Object.keys(s.goodsSize).length?t("div",{attrs:{id:"goodssize"}},[0!=s.goodsSize.image.length?t("div",{staticClass:"image"},s._l(s.goodsSize.image,(function(e){return t("img",{attrs:{src:e,alt:""},on:{load:s.imgLoaded}})})),0):s._e(),t("table",{staticClass:"info"},[t("tr",[t("td",{attrs:{colspan:"2"}},[s._v(s._s(s.goodsSize.infokey))])]),s._l(s.goodsSize.infoset,(function(e){return t("tr",[t("td",[s._v(s._s(e.key))]),t("td",[s._v(s._s(e.value))])])})),s.goodsSize.ruledesc?t("tr",[t("td",{attrs:{colspan:"2"}},[s._v(s._s(s.goodsSize.ruledesc))])]):s._e()],2),s.goodsSize.ruletables?t("table",{staticClass:"rule"},[t("tr",[t("td",{attrs:{colspan:s.goodsSize.ruletables[0][0].length}},[s._v(s._s(s.goodsSize.rulekey))])]),s._l(s.goodsSize.ruletables[0],(function(e){return t("tr",s._l(e.length,(function(i){return t("td",[s._v(s._s(e[i-1]))])})),0)})),t("tr",[t("td",{attrs:{colspan:s.goodsSize.ruletables[0][0].length}},[s._v(s._s(s.goodsSize.ruledisclaimer))])])],2):s._e()]):s._e()},O=[],N={name:"DetailGoodsSize",props:{goodsSize:{type:Object,default:function(){return{}}}},methods:{imgLoaded:function(){this.$bus.$emit("imghasloaded")}}},G=N,U=(0,u.Z)(G,Z,O,!1,null,"76130490",null),H=U.exports,F=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",[0!=Object.keys(s.userRate).length?t("div",{attrs:{id:"userrate"}},[t("div",{staticClass:"top"},[t("span",[s._v("用户评价 "),t("span",[s._v(s._s(s.userRate.cRate))])]),t("a",{attrs:{href:"javascript:;"}},[s._v("更多+")])]),t("div",{staticClass:"bottom"},[t("div",[t("img",{attrs:{src:s.userRate.userAvatar,alt:""}}),t("span",[s._v(s._s(s.userRate.uerName))])]),t("p",[s._v(s._s(s.userRate.content))]),t("div",[t("span",[s._v(s._s(s.Timer(s.userRate.time)))]),t("br"),t("span",[s._v("商品编号:"+s._s(s.userRate.rateId))]),t("span",[s._v(s._s(s.userRate.goodsStyle))]),s._l(s.userRate.extraInfo,(function(e){return t("span",[s._v(s._s(e))])})),t("div",s._l(s.userRate.goodsImages,(function(s){return t("img",{attrs:{src:s,alt:""}})})),0)],2)])]):t("div",{attrs:{id:"norate"}},[s._v(" 当前还无用户评价哦 ")])])},V=[],X=t(2815),q={name:"DetailUserRate",props:{userRate:{type:Object,default:function(){return{}}}},data:function(){return{realTime:""}},methods:{Timer:function(s){return(0,X.h)(s)}}},J=q,K=(0,u.Z)(J,F,V,!1,null,"fb0ecb0e",null),Q=K.exports,W=t(549),Y=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{attrs:{id:"detailbottombar"}},[s._m(0),s._m(1),s._m(2),t("div",{staticClass:"shoppingCar",on:{click:s.addCart}},[s._v(" 加入购物车 ")]),t("div",{staticClass:"buying"},[s._v(" 购买 ")])])},ss=[function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"service"},[t("i",{staticClass:"iconfont"},[s._v("")]),t("p",[s._v("客服")])])},function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"shop"},[t("i",{staticClass:"iconfont"},[s._v("")]),t("p",[s._v("店铺")])])},function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"like"},[t("i",{staticClass:"iconfont"},[s._v("")]),t("p",[s._v("收藏")])])}],es={name:"DetailBottomBar",methods:{addCart:function(){this.$emit("addToCart")}}},ts=es,is=(0,u.Z)(ts,Y,ss,!1,null,"fa51bd7c",null),os=is.exports,as=t(3121);function rs(s,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}function ns(s,e,t){return e&&rs(s.prototype,e),t&&rs(s,t),Object.defineProperty(s,"prototype",{writable:!1}),s}t(1703);function ls(s,e){if(!(s instanceof e))throw new TypeError("Cannot call a class as a function")}t(8309);var cs=t(3685);function ds(s){return(0,cs.d)({url:"/detail",params:{iid:s}})}function us(){return(0,cs.d)({url:"/recommend"})}var gs=ns((function s(e,t,i){ls(this,s),this.title=e.title,this.desc=e.desc,this.newPrice=e.price,this.oldPrice=e.oldPrice,this.discount=e.discountDesc,this.realPrice=e.lowNowPrice,this.columns=t,this.services=i})),hs=ns((function s(e){ls(this,s),this.logo=e.shopLogo,this.name=e.name,this.fans=e.cFans,this.sells=e.cSells,this.score=e.score,this.goodsCount=e.cGoods})),fs=ns((function s(e){ls(this,s),this.desc=e.desc,this.key=e.detailImage[0].key,this.imgList=e.detailImage[0].list})),ps=ns((function s(e){ls(this,s),e.info.images?this.image=e.info.images:this.image=[],this.infokey=e.info.key,this.infoset=e.info.set,this.rulekey=e.rule.key,this.ruledesc=e.rule.desc,this.ruledisclaimer=e.rule.disclaimer,this.ruletables=e.rule.tables})),vs=ns((function s(e,t){ls(this,s),this.cRate=e.cRate,this.content=t.content,this.time=t.created,this.extraInfo=t.extraInfo,this.goodsImages=t.images,this.rateId=t.rateId,this.goodsStyle=t.style,this.userAvatar=t.user.avatar,this.uerName=t.user.uname})),ms={name:"Detail",components:{DetailNavBar:h,DetailSwiper:S,DetailGoodsMessage:k,DetailShopMessage:D,DetailGoodsInfo:A,GoodsSize:ps,DetailGoodsSize:H,DetailUserRate:Q,goodsList:W.Z,DetailBottomBar:os,Scroll:a.Z},mixins:[as.M$],data:function(){return{iid:null,topimges:[],goodsMessage:{},shopMessage:{},goodsInfo:{},goodsSize:{},userRate:{},recommends:[],refresh:null,allScrollTops:[],getallScrollTopsByTimer:null,currentIndex:0}},created:function(){var s=this;this.iid=this.$route.params.iid,console.log(this.iid),ds(this.iid).then((function(e){var t=e.result;s.topimges=t.itemInfo.topImages,s.goodsMessage=new gs(t.itemInfo,t.columns,t.shopInfo.services),s.shopMessage=new hs(t.shopInfo),s.goodsInfo=new fs(t.detailInfo),s.goodsSize=new ps(t.itemParams),0!==t.rate.cRate&&(s.userRate=new vs(t.rate,t.rate.list[0]))})),us().then((function(e){s.recommends=e.data.list}))},mounted:function(){var s=this;this.refresh=(0,X.D)(this.$refs.scroller&&this.$refs.scroller.refresh,50),this.getallScrollTopsByTimer=(0,X.D)(this.getallScrollTops,50),this.$bus.$on("imghasloaded",(function(){s.refresh(),s.getallScrollTopsByTimer()}))},destroyed:function(){this.$bus.$off("imghasloaded")},methods:{scrollToActiveSite:function(s){this.$refs.scroller.scrollTo(0,-this.allScrollTops[s],300)},getallScrollTops:function(){this.allScrollTops=[],this.allScrollTops.push(0),this.allScrollTops.push(this.$refs.goodsSize.$el.offsetTop-44),this.allScrollTops.push(this.$refs.userRate.$el.offsetTop-44),this.allScrollTops.push(this.$refs.recommends.$el.offsetTop-44),this.allScrollTops.push(Number.MAX_VALUE)},bescroll:function(s){this.IsBackTopshow(s);for(var e=0;e<this.allScrollTops.length-1;e++)this.currentIndex!==e&&-s.y>=this.allScrollTops[e]&&-s.y<this.allScrollTops[e+1]&&(this.currentIndex=e,this.$refs.NavBar.activeindex=this.currentIndex)},addToCart:function(){var s=this,e={};e.iid=this.iid,e.image=this.topimges[0],e.title=this.goodsMessage.title,e.desc=this.goodsMessage.desc,e.realPrice=this.goodsMessage.realPrice,e.count=1,e.checked=!0,this.$store.dispatch("addProduct",e).then((function(e){s.$toast.changeShow(e,2e3)}))}}},_s=ms,bs=(0,u.Z)(_s,i,o,!1,null,"32898978",null),Ss=bs.exports},228:function(s,e,t){s.exports=t.p+"img/back.2905f178.svg"}}]);
//# sourceMappingURL=374-legacy.43d73f4a.js.map